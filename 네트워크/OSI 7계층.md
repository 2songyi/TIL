### 프로토콜 
: 네트워크 통신 규약

---

## OSI 7계층
1 ~ 4 계층 : 데이터 플로 계층 / 하위 계층  
5 ~ 7 계층 : 애플리케이션 계층 / 상위 계층



TCP/IP 프로토콜 스택

현대 네트워크는 대부분 TCP/IP와 이더넷으로 이루어져 있음.


### 1. 1계층(피지컬 계층)
* 물리적 연결과 관련된 정보를 정의.
* 주로 전기 신호를 전달하는데 초점이 맞춰져 있음.

* 장비 : 허브, 리피터, 케이블, 커넥터, 트랜시버, 탭
  - 허브,리피터 - 네트워크 통신을 중재하는 네트워크 장비
  - 케이블, 커넥터 - 케이블 본체를 구성하는 요소
  - 트랜시버 - 컴퓨터의 랜카드와 케이블을 연결하는 장비
  - 탭 - 네트워크 모니터링과 패킷분석을 위해 전기 신호를 다른 장비로 복제.
* 1계층 장비는 주소의 개념이 없으므로 전기 신호가 들어온 포트를 제외하고 모든 포트에 같은 전기 신호를 전송.

  
### 2. 2계층(데이터 링크 계층)
* 전기 신호를 모아 우리가 알아볼 수 있는 데이터 형태로 처리.
* 1계층과 다르게 전기 신호를 정확히 전달하기보다 주소 정보를 정의하고 정확한 주소로 통신 되는데 초점.
* 주소 체계가 생기며 여러 통신이 한꺼번에 이루어지는 것을 구분하기 위한 기능이 주로 정의.
* 구성요소 : 네트워크 인터페이스 카드(NIC), 스위치
  - NIC - NIC에는 고유 MAC주소가 있음. 입력되는 전기 신호를 데이터 형태로 만들고 데이터에서 도착지 MAC주소를 확인 후 자신에게 들어오는 전기 신호가 맞는지 확인함.
  - 자신에게 들어오는 전기 신호가 아니면 버리고 맞으면 이 데이터를 상위 계층에서 처리할 수 있도록 메모리에 적재함.
  - 스위치 - 단말이 어떤 MAC주소인지, 연결된 포트는 어느 것인지 주소 습득 과정에서 알 수 있고 이 데이터를 기반으로 단말들이 통신할 때 포트를 적절히 필터링하고 정확한 포트로 포워딩해줌.
  
### 3. 3계층 (네트워크 계층)
* IP주소와 같은 논리적인 주소 정의.
* MAC주소와 달리 IP주소는 사용자가 환경에 맞게 변경해 사용할 수 있고 네트워크 주소 부분과 호스트 주소 부분으로 나뉨.
  
*  IP주소 체계  
ex ) 172.31.0.1  
172.31 > 네트워크 주소 부분  
0.1 > 호스트 주소 부분  

* 장비 : 라우터
  - 라우터 - IP 주소를 사용해 최적의 경로를 찾아주고 해당 경로로 패킷을 전송하는 역할.

  
### 4. 4계층(트랜스포트 계층)
* 하위 계층인 1,2,3계층은 신화와 데이터를 올바른 위치로 보내고 실제 신호를 잘 만들어 보내는 데 집중함.
* 4계층은 실제로 해당 데이터들이 정상적으로 잘 보내지도록 확인하는 역할을 함.
* 패킷이 유실되거나 순서가 바뀌었을 때 바로잡아 주는 역할을 담당.

- 시퀀스번호 - 패킷에 보내는 순서를 명시한 것
- ACK 번호 - 받는 순서를 명시한 것
  
* 장치 내 많은 애플리케이션을 구분할 수 있도록 포트 번호를 사용해 상위 애플리케이션을 구분함.

* 장비 : 로드 밸런서, 방화벽
* 애플리케이션 구분자(포트 번호)와 시퀀스, ACK 번호 정보를 이용해 부하를 분산하거나 보안 정책을 수립해 패킷을 통화, 차단하는 기능을 수행함.

  
### 5. 5계층(세션 계층)
* 양 끝단의 응용 프로세스가 연결을 성립하도록 도와주고 연결이 안정적으로 유지되도록 관리하고 작업 완료 후에는 이 연결을 끊는 역할을 함.
* 에러로 중단된 통신에 대한 에러 복구와 재전송도 수행함.

  
### 6. 6계층(프레젠테이션 계층)
* 표현 방식이 다른 애플리케이션이나 시스템 간의 통신을 돕기 위해 하나의 통일된 구문 형식으로 변환시키는 기능을 수행.
* 일종의 번역기나 변환기 역할을 수행하는 계층이고 이런 기능은 사용자 시스템의 응용 계층에서 데이터의 형식상 차이를 다루는 부담을 덜어줌.
* MIME 인코딩이나 암호화, 압축, 코드 변환과 같은 동작이 이루어짐.

### 7. 7계층(애플리케이션 계층)
* 애플리케이션 프로세스를 정의하고 애플리케이션 서비스를 수행.
* 네트워크 소프트웨어의 UI부분이나 사용자 입출력부분을 정의.
* 대표 프로토콜 : FTP, SMTP, HTTP, TELNET


---
  
### 인캡슐레이션
* 애플리케이션에서 데이터를 데이터 플로 계층(1~4계층)으로 내려보내면서 패킷에 데이터를 넣을 수 있도록 분할하는 과정.
* 네트워크 상황을 고려해 적적한 크기로 데이터를 쪼개고 4계층부터 네트워크 전송을 위한 정보를 헤더에 붙여 넣음.
* 헤더에 꼭 들어가야 하는 정보
  - 현재 계층에서 정의하는 정보.
  - 상위 프로토콜 지시자.

### 디캡슐레이션
* 받은 전기 신호를 데이터 형태로 만들어 2계층으로 올려보냄.
  
* 실제 데이터는 상위 계층 -> 하위 계층, 하위 계층 -> 상위 계층으로 전달되고 헤더 정보는 각 계층끼리 전달됨.

